# ë…ë¦½ ë¸”ë¡œê·¸ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

AdHubì˜ Supabase DBë¥¼ ë°”ë¼ë³´ëŠ” **ë…ë¦½ ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸**ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.

### â­ í•µì‹¬ ê°œë…

- **ê° ë¸”ë¡œê·¸ = 1ê°œ ì‚¬ì—…ì = ë‹¨ì¼ í™ë³´ ë¸”ë¡œê·¸**
- **í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ ì½”ë“œ**ë¥¼ ì—¬ëŸ¬ ë²ˆ ë°°í¬
- ê° ë°°í¬ë§ˆë‹¤ **ë‹¤ë¥¸ ë„ë©”ì¸ + ë‹¤ë¥¸ BLOG_KEY í™˜ê²½ ë³€ìˆ˜**
- URLì— `[blogKey]` ì—†ìŒ! í™˜ê²½ ë³€ìˆ˜ë¡œ ì²˜ë¦¬

### ë°°í¬ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel/Netlify: ê°™ì€ ì½”ë“œ, ë‹¤ë¥¸ í™˜ê²½ ë³€ìˆ˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë°°í¬ 1: cafe-blog.com                                       â”‚
â”‚  í™˜ê²½ ë³€ìˆ˜: BLOG_KEY=user123-cafe                            â”‚
â”‚  â†’ cafe-blog.com/                   (ë¸”ë¡œê·¸ í™ˆ)              â”‚
â”‚  â†’ cafe-blog.com/post/new-menu      (í¬ìŠ¤íŠ¸)                 â”‚
â”‚  â†’ ëª¨ë“  í¬ìŠ¤íŠ¸: ì¹´í˜ í™ë³´ (#ì‹ ë©”ë‰´, #ì´ë²¤íŠ¸, #í›„ê¸°)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë°°í¬ 2: gym-fitness.com                                     â”‚
â”‚  í™˜ê²½ ë³€ìˆ˜: BLOG_KEY=company-gym                             â”‚
â”‚  â†’ gym-fitness.com/                 (ë¸”ë¡œê·¸ í™ˆ)              â”‚
â”‚  â†’ gym-fitness.com/post/workout-tips (í¬ìŠ¤íŠ¸)                â”‚
â”‚  â†’ ëª¨ë“  í¬ìŠ¤íŠ¸: í—¬ìŠ¤ì¥ í™ë³´ (#ìš´ë™íŒ, #íšŒì›í›„ê¸°, #ì‹œì„¤ì†Œê°œ)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë°°í¬ 3: tech-startup.com                                    â”‚
â”‚  í™˜ê²½ ë³€ìˆ˜: BLOG_KEY=startup-tech                            â”‚
â”‚  â†’ tech-startup.com/                (ë¸”ë¡œê·¸ í™ˆ)              â”‚
â”‚  â†’ tech-startup.com/post/ai-trends  (í¬ìŠ¤íŠ¸)                 â”‚
â”‚  â†’ ëª¨ë“  í¬ìŠ¤íŠ¸: IT íšŒì‚¬ í™ë³´ (#ê¸°ìˆ ë¸”ë¡œê·¸, #ì œí’ˆì†Œê°œ, #ì±„ìš©)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì¥ì 

1. **ì™„ì „íˆ ë…ë¦½ëœ ë„ë©”ì¸**: ê° ë¸”ë¡œê·¸ê°€ ìê¸°ë§Œì˜ ë„ë©”ì¸ ì†Œìœ 
2. **ê°„ë‹¨í•œ URL êµ¬ì¡°**: `/`, `/post/hello-world`
3. **ì‰¬ìš´ ë°°í¬**: ê°™ì€ ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ í™˜ê²½ ë³€ìˆ˜ë§Œ ë°”ê¿”ì„œ ë°°í¬
4. **ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš©ì´**: í•„ìš”ì‹œ íŠ¹ì • ë¸”ë¡œê·¸ë§Œ ì½”ë“œ ìˆ˜ì • ê°€ëŠ¥
5. **ë‹¨ìˆœí•œ êµ¬ì¡°**: ê° ë¸”ë¡œê·¸ëŠ” í•˜ë‚˜ì˜ ì‚¬ì—…ìë¥¼ ìœ„í•œ í™ë³´ ë¸”ë¡œê·¸

---

## ğŸ—„ï¸ Supabase DB êµ¬ì¡°

### 1. `blog_settings` í…Œì´ë¸”
ë¸”ë¡œê·¸ì˜ ëª¨ë“  ì •ë³´ì™€ ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤.

```sql
CREATE TABLE public.blog_settings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  "blogKey" TEXT UNIQUE NOT NULL,  -- â­ ë¸”ë¡œê·¸ ê³ ìœ  ì‹ë³„ì
  "userId" UUID,

  -- ê¸°ë³¸ ì •ë³´
  site_title TEXT NOT NULL,
  site_description TEXT,
  site_url TEXT,

  -- SEO í‚¤ì›Œë“œ (ìë™ í¬ìŠ¤íŒ…ì— ì‚¬ìš©)
  keywords TEXT[] DEFAULT '{}',

  -- ì‚°ì—… ë¶„ì•¼
  industry TEXT,  -- technology, food, health, finance ë“±

  -- ë¸Œëœë”© ì •ë³´ (JSONB)
  "brandInfo" JSONB,
  -- {
  --   brandName: string           // ë¸Œëœë“œëª…
  --   coreValues: string[]        // í•µì‹¬ ê°€ì¹˜
  --   targetAudience: string      // íƒ€ê²Ÿ ê³ ê°
  --   uniqueSellingPoints: string[] // ì°¨ë³„í™” í¬ì¸íŠ¸
  --   brandVoice: string          // ë¸Œëœë“œ í†¤ì•¤ë§¤ë„ˆ
  -- }

  -- AI í”„ë¡¬í”„íŠ¸ ì„¤ì • (JSONB)
  "promptSettings" JSONB,
  -- {
  --   contentPrompt: string       // ì½˜í…ì¸  ìƒì„± í”„ë¡¬í”„íŠ¸
  --   seoPrompt: string           // SEO ìµœì í™” í”„ë¡¬í”„íŠ¸
  --   model: string               // AI ëª¨ë¸
  --   temperature: number         // Temperature
  --   maxTokens: number           // Max Tokens
  -- }

  -- ìƒíƒœ
  "isActive" BOOLEAN DEFAULT true,

  -- ìë™ í¬ìŠ¤íŒ… ì„¤ì •
  "postsPerDay" INTEGER DEFAULT 2,
  "imagesPerPost" INTEGER DEFAULT 3,
  "postingEnabled" BOOLEAN DEFAULT false,
  "lastPostedAt" TIMESTAMPTZ,

  -- í™ë³´ ì •ë³´
  "businessName" TEXT,
  "businessDescription" TEXT,
  "promotionGoal" TEXT,
  "productInfo" JSONB,

  -- ê´‘ê³ 
  "adsenseEnabled" BOOLEAN DEFAULT false,
  "adsenseClientId" TEXT,

  -- ìŠ¤íƒ€ì¼
  "contentStyle" TEXT,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

### 2. `posts` í…Œì´ë¸”
ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

```sql
CREATE TABLE public.posts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  blog_key TEXT NOT NULL,  -- â­ blogKeyë¡œ ë¸”ë¡œê·¸ êµ¬ë¶„
  "authorId" UUID,

  -- ê¸°ë³¸ ì •ë³´
  title TEXT NOT NULL,
  slug TEXT NOT NULL,
  excerpt TEXT,
  content TEXT NOT NULL,
  "richContent" JSONB,
  "contentFormat" TEXT DEFAULT 'markdown',

  -- ì´ë¯¸ì§€
  images TEXT[] DEFAULT '{}',

  -- íƒœê·¸ (ê°„ë‹¨í•œ ë¶„ë¥˜ìš©)
  tags TEXT[] DEFAULT '{}',  -- â­ ì˜ˆ: ["ì‹ ë©”ë‰´", "ì´ë²¤íŠ¸", "í›„ê¸°"]

  -- SEO
  "seoTitle" TEXT,
  "seoDescription" TEXT,
  "seoKeywords" TEXT[] DEFAULT '{}',
  "ogImage" TEXT,

  -- ìƒíƒœ
  published BOOLEAN DEFAULT false,
  "publishedAt" TIMESTAMPTZ,
  "viewCount" INTEGER DEFAULT 0,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),

  UNIQUE(blog_key, slug)
);

CREATE INDEX idx_posts_blog_key ON posts(blog_key);
CREATE INDEX idx_posts_published ON posts(published);
CREATE INDEX idx_posts_published_at ON posts("publishedAt" DESC);
CREATE INDEX idx_posts_tags ON posts USING GIN(tags);
```

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
my-blog/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                      # ë¸”ë¡œê·¸ í™ˆ (í¬ìŠ¤íŠ¸ ëª©ë¡)
â”‚   â”œâ”€â”€ layout.tsx                    # ë ˆì´ì•„ì›ƒ (í—¤ë”, í‘¸í„°)
â”‚   â”œâ”€â”€ post/
â”‚   â”‚   â””â”€â”€ [slug]/
â”‚   â”‚       â””â”€â”€ page.tsx              # í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ tag/
â”‚   â”‚   â””â”€â”€ [tag]/
â”‚   â”‚       â””â”€â”€ page.tsx              # íƒœê·¸ë³„ í¬ìŠ¤íŠ¸ ëª©ë¡ (ì„ íƒì‚¬í•­)
â”‚   â”œâ”€â”€ sitemap.ts                    # sitemap.xml ìƒì„±
â”‚   â””â”€â”€ robots.ts                     # robots.txt ìƒì„±
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ BlogHeader.tsx                # ë¸”ë¡œê·¸ í—¤ë”
â”‚   â”œâ”€â”€ PostCard.tsx                  # í¬ìŠ¤íŠ¸ ì¹´ë“œ
â”‚   â”œâ”€â”€ TagCloud.tsx                  # íƒœê·¸ í´ë¼ìš°ë“œ (ì„ íƒì‚¬í•­)
â”‚   â””â”€â”€ Pagination.tsx                # í˜ì´ì§€ë„¤ì´ì…˜
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts                   # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ blog.ts                       # ë¸”ë¡œê·¸ ë°ì´í„° ì¡°íšŒ í•¨ìˆ˜
â”œâ”€â”€ types/
â”‚   â””â”€â”€ blog.types.ts                 # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ seo.ts                        # SEO í—¬í¼ í•¨ìˆ˜
â”‚   â””â”€â”€ constants.ts                  # ìƒìˆ˜ ì •ì˜
â””â”€â”€ .env.local
    â”œâ”€â”€ BLOG_KEY=user123-cafe         # â­ ì´ ë¸”ë¡œê·¸ì˜ blogKey
    â”œâ”€â”€ NEXT_PUBLIC_SUPABASE_URL=...
    â””â”€â”€ NEXT_PUBLIC_SUPABASE_ANON_KEY=...
```

---

## ğŸ“ ì‘ì—… ìˆœì„œ

### Phase 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
1. Next.js í”„ë¡œì íŠ¸ ìƒì„±
2. Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
3. TypeScript íƒ€ì… ì •ì˜
4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (BLOG_KEY ì¶”ê°€!)

### Phase 2: ë¸”ë¡œê·¸ í™ˆ í˜ì´ì§€
1. `app/page.tsx` êµ¬í˜„
2. í™˜ê²½ ë³€ìˆ˜ì—ì„œ BLOG_KEY ê°€ì ¸ì˜¤ê¸°
3. ë¸”ë¡œê·¸ ì„¤ì • ì¡°íšŒ
4. ìµœì‹  í¬ìŠ¤íŠ¸ ëª©ë¡ í‘œì‹œ
5. íƒœê·¸ í´ë¼ìš°ë“œ (ì„ íƒì‚¬í•­)

### Phase 3: í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€
1. `app/post/[slug]/page.tsx` êµ¬í˜„
2. Markdown â†’ HTML ë Œë”ë§
3. ì´ë¯¸ì§€ ìµœì í™”
4. SEO ë©”íƒ€ íƒœê·¸
5. ì¡°íšŒìˆ˜ ì¦ê°€

### Phase 4: SEO ìµœì í™”
1. generateMetadata() í•¨ìˆ˜
2. sitemap.xml ìƒì„±
3. robots.txt ì„¤ì •
4. Open Graph ì´ë¯¸ì§€
5. JSON-LD êµ¬ì¡°í™” ë°ì´í„°

### Phase 5: ì„±ëŠ¥ ìµœì í™”
1. ISR (Incremental Static Regeneration)
2. ì´ë¯¸ì§€ ìµœì í™”
3. ìºì‹± ì „ëµ
4. í°íŠ¸ ìµœì í™”

---

## ğŸ”§ ìƒì„¸ êµ¬í˜„ ê°€ì´ë“œ

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```env
# .env.local
BLOG_KEY=user123-cafe                                      # â­ ì´ ë¸”ë¡œê·¸ì˜ ê³ ìœ  ì‹ë³„ì
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_SITE_URL=https://cafe-blog.com
```

---

### 2. Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

```typescript
// lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    persistSession: false,
  },
})
```

---

### 3. ë¸”ë¡œê·¸ ë°ì´í„° ì¡°íšŒ í—¬í¼

```typescript
// lib/blog.ts
import { supabase } from './supabase'

// í™˜ê²½ ë³€ìˆ˜ì—ì„œ BLOG_KEY ê°€ì ¸ì˜¤ê¸°
const BLOG_KEY = process.env.BLOG_KEY!

if (!BLOG_KEY) {
  throw new Error('BLOG_KEY environment variable is not set!')
}

// ë¸”ë¡œê·¸ ì„¤ì • ì¡°íšŒ
export async function getBlogSettings() {
  const { data, error } = await supabase
    .from('blog_settings')
    .select('*')
    .eq('blogKey', BLOG_KEY)
    .single()

  if (error) throw error
  return data
}

// í¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
export async function getPosts(page = 1, perPage = 10) {
  const { data, error, count } = await supabase
    .from('posts')
    .select('*', { count: 'exact' })
    .eq('blog_key', BLOG_KEY)
    .eq('published', true)
    .order('publishedAt', { ascending: false })
    .range((page - 1) * perPage, page * perPage - 1)

  if (error) throw error
  return { posts: data || [], total: count || 0 }
}

// í¬ìŠ¤íŠ¸ ìƒì„¸ ì¡°íšŒ
export async function getPostBySlug(slug: string) {
  const { data, error } = await supabase
    .from('posts')
    .select('*')
    .eq('blog_key', BLOG_KEY)
    .eq('slug', slug)
    .eq('published', true)
    .single()

  if (error) throw error
  return data
}

// íƒœê·¸ë³„ í¬ìŠ¤íŠ¸ ì¡°íšŒ (ì„ íƒì‚¬í•­)
export async function getPostsByTag(tag: string, page = 1, perPage = 10) {
  const { data, error, count } = await supabase
    .from('posts')
    .select('*', { count: 'exact' })
    .eq('blog_key', BLOG_KEY)
    .contains('tags', [tag])  // tags ë°°ì—´ì— í•´ë‹¹ íƒœê·¸ í¬í•¨
    .eq('published', true)
    .order('publishedAt', { ascending: false })
    .range((page - 1) * perPage, page * perPage - 1)

  if (error) throw error
  return { posts: data || [], total: count || 0 }
}

// ëª¨ë“  íƒœê·¸ ì¡°íšŒ (ì„ íƒì‚¬í•­)
export async function getAllTags() {
  const { data, error } = await supabase
    .from('posts')
    .select('tags')
    .eq('blog_key', BLOG_KEY)
    .eq('published', true)

  if (error) throw error

  // ëª¨ë“  íƒœê·¸ë¥¼ ì¶”ì¶œí•˜ì—¬ ì¤‘ë³µ ì œê±°
  const allTags = data?.flatMap(post => post.tags || []) || []
  return Array.from(new Set(allTags))
}

// ì¡°íšŒìˆ˜ ì¦ê°€
export async function incrementViewCount(postId: string) {
  const { error } = await supabase.rpc('increment_view_count', {
    post_id: postId,
  })

  if (error) console.error('Failed to increment view count:', error)
}
```

---

### 4. TypeScript íƒ€ì… ì •ì˜

```typescript
// types/blog.types.ts
export interface BlogSettings {
  id: string
  blogKey: string
  siteTitle: string
  siteDescription?: string
  siteUrl?: string
  keywords: string[]
  industry?: string
  brandInfo?: BrandInfo
  promptSettings?: PromptSettings
  isActive: boolean
  businessName?: string
  businessDescription?: string
  adsenseEnabled: boolean
  adsenseClientId?: string
  createdAt: string
  updatedAt: string
}

export interface BrandInfo {
  brandName?: string
  coreValues?: string[]
  targetAudience?: string
  uniqueSellingPoints?: string[]
  brandVoice?: string
}

export interface PromptSettings {
  contentPrompt?: string
  seoPrompt?: string
  model?: string
  temperature?: number
  maxTokens?: number
}

export interface Post {
  id: string
  blogKey: string
  title: string
  slug: string
  excerpt?: string
  content: string
  images: string[]
  tags: string[]  // â­ íƒœê·¸ ë°°ì—´
  seoTitle?: string
  seoDescription?: string
  seoKeywords: string[]
  ogImage?: string
  published: boolean
  publishedAt?: string
  viewCount: number
  createdAt: string
  updatedAt: string
}
```

---

### 5. ë¸”ë¡œê·¸ í™ˆ í˜ì´ì§€

```typescript
// app/page.tsx
import { Metadata } from 'next'
import { getBlogSettings, getPosts } from '@/lib/blog'
import PostCard from '@/components/PostCard'
import Pagination from '@/components/Pagination'

interface Props {
  searchParams: Promise<{ page?: string }>
}

// SEO ë©”íƒ€ë°ì´í„° ìƒì„±
export async function generateMetadata(): Promise<Metadata> {
  const settings = await getBlogSettings()

  return {
    title: settings.siteTitle,
    description: settings.siteDescription || '',
    keywords: settings.keywords.join(', '),
    openGraph: {
      title: settings.siteTitle,
      description: settings.siteDescription || '',
      type: 'website',
    },
  }
}

export default async function HomePage({ searchParams }: Props) {
  const { page = '1' } = await searchParams
  const currentPage = parseInt(page)
  const postsPerPage = 10

  // ë°ì´í„° ë³‘ë ¬ ì¡°íšŒ
  const [settings, { posts, total }] = await Promise.all([
    getBlogSettings(),
    getPosts(currentPage, postsPerPage),
  ])

  const totalPages = Math.ceil(total / postsPerPage)

  return (
    <div className="min-h-screen bg-gray-50">
      {/* í—¤ë” */}
      <header className="bg-white border-b shadow-sm">
        <div className="max-w-4xl mx-auto px-4 py-8">
          <h1 className="text-4xl font-bold text-gray-900">{settings.siteTitle}</h1>
          {settings.siteDescription && (
            <p className="text-gray-600 mt-2 text-lg">{settings.siteDescription}</p>
          )}
          {settings.brandInfo?.brandName && (
            <p className="text-gray-500 mt-1 text-sm">
              by {settings.brandInfo.brandName}
            </p>
          )}
        </div>
      </header>

      <div className="max-w-4xl mx-auto px-4 py-8">
        {/* ë©”ì¸: í¬ìŠ¤íŠ¸ ëª©ë¡ */}
        <main>
          <h2 className="text-2xl font-bold mb-6">ìµœì‹  í¬ìŠ¤íŠ¸</h2>

          <div className="space-y-6">
            {posts.map((post) => (
              <PostCard key={post.id} post={post} />
            ))}
          </div>

          {/* í˜ì´ì§€ë„¤ì´ì…˜ */}
          {totalPages > 1 && (
            <Pagination currentPage={currentPage} totalPages={totalPages} />
          )}
        </main>
      </div>
    </div>
  )
}

// ISR: 10ë¶„ë§ˆë‹¤ ì¬ìƒì„±
export const revalidate = 600
```

---

### 6. í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€

```typescript
// app/post/[slug]/page.tsx
import { Metadata } from 'next'
import { notFound } from 'next/navigation'
import { getPostBySlug, incrementViewCount } from '@/lib/blog'
import ReactMarkdown from 'react-markdown'
import Image from 'next/image'

interface Props {
  params: Promise<{ slug: string }>
}

export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { slug } = await params
  const post = await getPostBySlug(slug)

  if (!post) {
    return { title: 'Post Not Found' }
  }

  return {
    title: post.seoTitle || post.title,
    description: post.seoDescription || post.excerpt || '',
    keywords: post.seoKeywords.join(', '),
    openGraph: {
      title: post.seoTitle || post.title,
      description: post.seoDescription || post.excerpt || '',
      images: post.ogImage ? [{ url: post.ogImage }] : [],
      type: 'article',
      publishedTime: post.publishedAt || undefined,
    },
  }
}

export default async function PostPage({ params }: Props) {
  const { slug } = await params
  const post = await getPostBySlug(slug)

  if (!post) {
    notFound()
  }

  // ì¡°íšŒìˆ˜ ì¦ê°€
  await incrementViewCount(post.id)

  return (
    <article className="max-w-4xl mx-auto px-4 py-12">
      {/* í¬ìŠ¤íŠ¸ í—¤ë” */}
      <header className="mb-8">
        {post.ogImage && (
          <div className="mb-6 rounded-lg overflow-hidden">
            <Image
              src={post.ogImage}
              alt={post.title}
              width={1200}
              height={630}
              className="w-full"
            />
          </div>
        )}

        <h1 className="text-4xl font-bold mb-4 text-gray-900">{post.title}</h1>

        <div className="flex items-center gap-4 text-gray-600 text-sm">
          <time dateTime={post.publishedAt || ''}>
            {new Date(post.publishedAt!).toLocaleDateString('ko-KR', {
              year: 'numeric',
              month: 'long',
              day: 'numeric',
            })}
          </time>
          <span>ì¡°íšŒ {post.viewCount + 1}</span>
        </div>

        {/* íƒœê·¸ */}
        {post.tags.length > 0 && (
          <div className="flex gap-2 mt-4">
            {post.tags.map((tag) => (
              <span
                key={tag}
                className="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"
              >
                #{tag}
              </span>
            ))}
          </div>
        )}
      </header>

      {/* í¬ìŠ¤íŠ¸ ë‚´ìš© */}
      <div className="prose prose-lg max-w-none">
        <ReactMarkdown>{post.content}</ReactMarkdown>
      </div>

      {/* í¬ìŠ¤íŠ¸ ì´ë¯¸ì§€ */}
      {post.images.length > 0 && (
        <div className="mt-12 grid grid-cols-2 gap-4">
          {post.images.map((img, idx) => (
            <div key={idx} className="rounded-lg overflow-hidden">
              <Image
                src={img}
                alt={`${post.title} - ì´ë¯¸ì§€ ${idx + 1}`}
                width={600}
                height={400}
                className="w-full"
              />
            </div>
          ))}
        </div>
      )}

      {/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
      <div className="mt-12 pt-8 border-t">
        <a href="/" className="text-blue-600 hover:underline">
          â† ë¸”ë¡œê·¸ í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </a>
      </div>
    </article>
  )
}

export const revalidate = 600
```

---

### 7. sitemap.xml ìƒì„±

```typescript
// app/sitemap.ts
import { MetadataRoute } from 'next'
import { supabase } from '@/lib/supabase'

const BLOG_KEY = process.env.BLOG_KEY!
const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://yourblog.com'

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  // ë°œí–‰ëœ í¬ìŠ¤íŠ¸ ì¡°íšŒ
  const { data: posts } = await supabase
    .from('posts')
    .select('slug, updated_at')
    .eq('blog_key', BLOG_KEY)
    .eq('published', true)

  const sitemap: MetadataRoute.Sitemap = [
    {
      url: BASE_URL,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
  ]

  // í¬ìŠ¤íŠ¸ í˜ì´ì§€
  posts?.forEach((post) => {
    sitemap.push({
      url: `${BASE_URL}/post/${post.slug}`,
      lastModified: new Date(post.updated_at),
      changeFrequency: 'weekly',
      priority: 0.9,
    })
  })

  return sitemap
}
```

---

### 8. robots.txt

```typescript
// app/robots.ts
import { MetadataRoute } from 'next'

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://yourblog.com'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
    },
    sitemap: `${BASE_URL}/sitemap.xml`,
  }
}
```

---

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### Vercel ë°°í¬ (ì˜ˆì‹œ)

#### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ ì¤€ë¹„
```bash
# GitHubì— ì½”ë“œ í‘¸ì‹œ
git init
git add .
git commit -m "Initial blog setup"
git push origin main
```

#### 2ë‹¨ê³„: Vercelì—ì„œ ë°°í¬ (cafe-blog.com)
1. Vercel ëŒ€ì‹œë³´ë“œ â†’ New Project
2. GitHub ì €ì¥ì†Œ ì„ íƒ
3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
   ```
   BLOG_KEY=user123-cafe
   NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   NEXT_PUBLIC_SITE_URL=https://cafe-blog.com
   ```
4. ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°: `cafe-blog.com`

#### 3ë‹¨ê³„: ê°™ì€ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ì‹œ ë°°í¬ (gym-fitness.com)
1. Vercel ëŒ€ì‹œë³´ë“œ â†’ New Project
2. ê°™ì€ GitHub ì €ì¥ì†Œ ì„ íƒ
3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
   ```
   BLOG_KEY=company-gym  â† ë‹¤ë¥¸ blogKey!
   NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   NEXT_PUBLIC_SITE_URL=https://gym-fitness.com
   ```
4. ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°: `gym-fitness.com`

---

## âœ… ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **Supabase RLS ì •ì±… ì„¤ì •** (`SUPABASE_RLS_SETUP.md` ì°¸ê³ )
    - [ ] blog_settings, postsì— RLS í™œì„±í™”
    - [ ] ì½ê¸° ì •ì±… ìƒì„± (`published = true`ë§Œ í—ˆìš©)
    - [ ] ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ ì •ì±… ìƒì„±
- [ ] **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
    - [ ] `BLOG_KEY` (í•„ìˆ˜!)
    - [ ] `NEXT_PUBLIC_SUPABASE_URL`
    - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
    - [ ] `NEXT_PUBLIC_SITE_URL`
- [ ] ISR ì„¤ì • í™•ì¸ (`revalidate = 600`)
- [ ] ì´ë¯¸ì§€ ìµœì í™” (Next.js Image)
- [ ] SEO ë©”íƒ€ íƒœê·¸ í™•ì¸
- [ ] sitemap.xml ìƒì„± í™•ì¸
- [ ] robots.txt í™•ì¸
- [ ] Open Graph ì´ë¯¸ì§€ ì„¤ì •
- [ ] ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°
- [ ] Google Analytics ì—°ë™ (ì„ íƒ)
- [ ] Google Search Console ë“±ë¡

---

## ğŸ“Œ ì£¼ìš” í¬ì¸íŠ¸

### 1. BLOG_KEY í™˜ê²½ ë³€ìˆ˜

**ëª¨ë“  ë°ì´í„° ì¡°íšŒëŠ” BLOG_KEYë¡œ í•„í„°ë§ë©ë‹ˆë‹¤:**

```typescript
// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
const BLOG_KEY = process.env.BLOG_KEY!  // í™˜ê²½ ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°

const { data } = await supabase
  .from('posts')
  .select('*')
  .eq('blog_key', BLOG_KEY)  // â† í•„ìˆ˜!
  .eq('published', true)

// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
const { data } = await supabase
  .from('posts')
  .select('*')
  .eq('published', true)  // â† BLOG_KEY í•„í„°ë§ ëˆ„ë½! ëª¨ë“  ë¸”ë¡œê·¸ ë°ì´í„°ê°€ ì„ì„!
```

### 2. ê°™ì€ ì½”ë“œ, ë‹¤ë¥¸ ë°°í¬

- í•˜ë‚˜ì˜ GitHub ì €ì¥ì†Œ
- ì—¬ëŸ¬ ë²ˆ ë°°í¬ (ê°ê° ë‹¤ë¥¸ ë„ë©”ì¸ + BLOG_KEY)
- ê° ë°°í¬ëŠ” ì™„ì „íˆ ë…ë¦½ì 

### 3. URL êµ¬ì¡° (ê°„ë‹¨í•¨!)

```
cafe-blog.com/                      â† ë¸”ë¡œê·¸ í™ˆ
cafe-blog.com/post/new-menu         â† í¬ìŠ¤íŠ¸
cafe-blog.com/post/special-event    â† í¬ìŠ¤íŠ¸
```

**ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ ì—†ìŒ! ê° ë¸”ë¡œê·¸ëŠ” ë‹¨ì¼ ì‚¬ì—…ììš©ì´ë¯€ë¡œ ì¹´í…Œê³ ë¦¬ ë¶ˆí•„ìš”**

### 4. íƒœê·¸ í™œìš© (ì„ íƒì‚¬í•­)

í¬ìŠ¤íŠ¸ë¥¼ ê°„ë‹¨í•˜ê²Œ ë¶„ë¥˜í•˜ê³  ì‹¶ë‹¤ë©´ íƒœê·¸ ì‚¬ìš©:

```typescript
// í¬ìŠ¤íŠ¸ì— íƒœê·¸ ì¶”ê°€
const post = {
  title: "ì‹ ë©”ë‰´ ì¶œì‹œ!",
  tags: ["ì‹ ë©”ë‰´", "ì´ë²¤íŠ¸", "í”„ë¡œëª¨ì…˜"]
}

// íƒœê·¸ë³„ ì¡°íšŒ (ì„ íƒì‚¬í•­)
const { posts } = await getPostsByTag("ì‹ ë©”ë‰´")
```

### 5. DBëŠ” Read-Only (Anon Key ì‚¬ìš©)

- Supabase Anon Keyë¡œ ì ‘ê·¼ (ë¡œê·¸ì¸ ë¶ˆí•„ìš”!)
- RLS ì •ì±…ìœ¼ë¡œ ë³´ì•ˆ: `published = true`ì¸ í¬ìŠ¤íŠ¸ë§Œ ì½ê¸°
- ì¡°íšŒìˆ˜ ì¦ê°€ë§Œ UPDATE í—ˆìš©
- ë‚˜ë¨¸ì§€ ì“°ê¸°/ì‚­ì œëŠ” AdHubì—ì„œë§Œ ê°€ëŠ¥

### 6. ìë™ í¬ìŠ¤íŒ…ê³¼ì˜ ì—°ë™

- ìë™ í¬ìŠ¤íŒ… í”„ë¡œì íŠ¸ â†’ DBì— í¬ìŠ¤íŠ¸ INSERT (blogKey ì§€ì •)
- ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸ â†’ ISRë¡œ 10ë¶„ë§ˆë‹¤ ì¬ìƒì„±í•˜ì—¬ ìë™ ë°˜ì˜
- AIê°€ blog_settingsì˜ brandInfoì™€ promptSettingsë¥¼ í™œìš©í•˜ì—¬ ì½˜í…ì¸  ìƒì„±

---

## ğŸ’¡ Claudeì—ê²Œ ì „ë‹¬í•  ë•Œ

ì´ ê°€ì´ë“œì™€ `SUPABASE_RLS_SETUP.md`ë¥¼ Claudeì—ê²Œ ë³´ì—¬ì£¼ë©°:

> "ì´ ê°€ì´ë“œë¥¼ ë³´ê³  Supabase DBë¥¼ ë°”ë¼ë³´ëŠ” ë…ë¦½ ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ì–´ì¤˜.
>
> í•µì‹¬ ê°œë…:
> - **í™˜ê²½ ë³€ìˆ˜ BLOG_KEYë¡œ ë¸”ë¡œê·¸ êµ¬ë¶„** (URLì— [blogKey] ì—†ìŒ!)
> - ê° ë¸”ë¡œê·¸ëŠ” **1ê°œ ì‚¬ì—…ì = ë‹¨ì¼ í™ë³´ ë¸”ë¡œê·¸**
> - ê°™ì€ ì½”ë“œë¥¼ ì—¬ëŸ¬ ë²ˆ ë°°í¬í•˜ë˜, ê° ë°°í¬ë§ˆë‹¤ ë‹¤ë¥¸ BLOG_KEY
> - ê° ë°°í¬ëŠ” ë…ë¦½ëœ ë„ë©”ì¸ (cafe-blog.com, gym-fitness.com ë“±)
>
> ìš”êµ¬ì‚¬í•­:
> - Next.js 15 App Router ì‚¬ìš©
> - URL êµ¬ì¡°: `/`, `/post/[slug]` (ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ ì—†ìŒ!)
> - ì™„ì „í•œ SEO ìµœì í™” (generateMetadata, sitemap, robots.txt)
> - ISR ì„¤ì •ìœ¼ë¡œ 10ë¶„ë§ˆë‹¤ ì¬ìƒì„±
> - ë°˜ì‘í˜• ë””ìì¸ (Tailwind CSS)
> - Markdown ë Œë”ë§ (react-markdown)
> - ì´ë¯¸ì§€ ìµœì í™” (Next.js Image)
>
> DB êµ¬ì¡°:
> - blog_settings: ë¸”ë¡œê·¸ ì •ë³´ + ë¸Œëœë”© + AI í”„ë¡¬í”„íŠ¸ + í™ë³´ ì •ë³´ (ëª¨ë‘ í†µí•©)
> - posts: í¬ìŠ¤íŠ¸ + SEO ë©”íƒ€ë°ì´í„° + tags ë°°ì—´
>
> ë³´ì•ˆ:
> - Supabase Anon Key ì‚¬ìš© (ë¡œê·¸ì¸ ë¶ˆí•„ìš”)
> - RLS ì •ì±…ìœ¼ë¡œ published = trueì¸ í¬ìŠ¤íŠ¸ë§Œ ê³µê°œ
> - ëª¨ë“  ì¿¼ë¦¬ëŠ” ë°˜ë“œì‹œ BLOG_KEYë¡œ í•„í„°ë§
>
> í™˜ê²½ ë³€ìˆ˜:
> - BLOG_KEY (í•„ìˆ˜!)
> - NEXT_PUBLIC_SUPABASE_URL
> - NEXT_PUBLIC_SUPABASE_ANON_KEY
> - NEXT_PUBLIC_SITE_URL"

---

## ğŸ”— ì°¸ê³  ìë£Œ

- Next.js App Router: https://nextjs.org/docs/app
- Supabase JS Client: https://supabase.com/docs/reference/javascript
- Next.js SEO: https://nextjs.org/learn/seo/introduction-to-seo
- ISR: https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating
- Vercel í™˜ê²½ ë³€ìˆ˜: https://vercel.com/docs/projects/environment-variables
